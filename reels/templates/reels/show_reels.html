{% extends 'base.html' %}
{% load static %}

{% block head %}
<title>Posts</title>
<link rel="stylesheet" href="{% static 'posts/show_posts.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
{% endblock %}




{% block section %}
<style>
  html,
  body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;

  }

  section {
    background-color: black;
  }

  .container {

    height: 100vh;
    width: 100%;
    padding: 0;
    overflow-y: scroll;
    scroll-snap-type: y mandatory;
  }

  .video-wrapper {
    scroll-snap-align: start;
    min-height: 100vh;
    width: 100%;
    position: relative;
  }

  video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>


<div class="container">

  <!-- Local Video 1 -->
  <div class="video-wrapper">
    <video class="auto-video" control playsinline>
      <source
        src="https://res.cloudinary.com/dtpo9ceis/video/upload/v1752744493/Festival_of_lights__How_did_you_shoot_this__A_question_I_get_often__So_here_s_the_process_behind_creating_this_long-exposure_hyperlapse.__Before_starting__I_take_a_picture_to_check_the_exposur_fhwwe8.mp4"
        type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>


  <!-- Local Video 2 -->
  <div class="video-wrapper">
    <video class="auto-video" playsinline>
      <source
        src="https://res.cloudinary.com/dtpo9ceis/video/upload/v1752744410/flash_warning_follow_me_new_video_every_day_MP4_alxbkj.mp4"
        type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  <!-- Local Video 3 -->
  <div class="video-wrapper">
    <video class="auto-video" playsinline>
      <source
        src="https://res.cloudinary.com/dtpo9ceis/video/upload/v1752744696/The_reason_%EF%B8%8F__hari_max_1__._.__._.__.__amma__ammalove_%EF%B8%8F__happmothersday__mother__ammalove__trending__viral__viralreels__trendingr%C3%A9els__expl_us1xis.mp4"
        type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  {% for video_url in video_urls %}
  <div class="video-wrapper">
    <video class="auto-video" playsinline>
      <source src="{{ video_url }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>
  {% endfor %}
</div>



<script>
  const videos = document.querySelectorAll("video.auto-video");

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      const video = entry.target;
      if (entry.isIntersecting) {
        video.play();
      } else {
        video.pause();
        video.currentTime = 0;
      }
    });
  }, {
    threshold: 0.7
  });

  videos.forEach(video => observer.observe(video));
</script>
{% endblock %}